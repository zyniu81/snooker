{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h2>Stages for {{ competition.name }}</h2>
    {% for stage_data in stages_with_matches %}
        <h3>{{ stage_data.stage.name }}</h3>
        {% if stage_data.matches %}
            <ul>
                {% for match in stage_data.matches %}
                    <li>{{ match }} - <a href="{% url 'match_detail' match.id %}">Details</a></li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No matches in this stage yet.</p>
        {% endif %}
    {% empty %}
        <p>No stages available for this competition.</p>
    {% endfor %}
    <a href="{% url 'competition_detail' competition.pk %}" class="btn btn-secondary">Back to Competition Details</a>
</div>
{% endblock %}
